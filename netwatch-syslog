#!rsc
# RouterOS script: netwatch-syslog
# Copyright (c) 2013-2020 Christian Hesse <mail@eworm.de>
#
# requires: dont-require-permissions=yes
#
# manage remote logging facilities

:local Remote [ /system logging action get ([ find where target=remote ]->0) remote ];

if ([ / tool netwatch get [ find where host=$Remote ] status ] = "up") do={
  / system logging set disabled=no [ find where action=remote disabled=yes ];
} else={
  / system logging set disabled=yes [ find where action=remote disabled=no ];
}
